{{ define "main" }}

<div class="homeGrid">

  <!-- LEFT: your expanded final project page content -->
  <main class="homeMain">
    {{ if .Content }}
      <article class="post">
        {{ .Content }}
      </article>
    {{ end }}
  </main>

  <!-- RIGHT: sticky navigation -->
  <aside class="homeSide">

    <!-- A) On-page sections (Table of Contents) -->
    {{ with .TableOfContents }}
      <div class="sideBox">
        <div class="sideTitle">On this page</div>
        <div class="sideToc">
          {{ . }}
        </div>
      </div>
    {{ end }}

    <!-- B) Devlog posts list (latest â†’ older) -->
    <div class="sideBox">
      <div class="sideTitle">Devlog</div>

      {{ $pages := where site.RegularPages "Type" "in" (site.Params.mainSections | default (slice "posts")) }}
      {{ $pages = $pages.ByDate.Reverse }}

      <ul class="sideList">
        <li><a href="{{ .RelPermalink }}">Final project page</a></li>
        {{ range $pages }}
          <li><a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
        {{ end }}
      </ul>
    </div>

  </aside>

</div>

{{ end }}
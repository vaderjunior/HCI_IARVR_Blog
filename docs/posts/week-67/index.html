<!doctype html>







<html
  class="not-ready lg:text-base"
  style="--bg:#faf8f1"
  lang="en-us"
  dir="ltr"
><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  
  <title>Week 6 and 7: Teaching the Avatar to Follow Me or me to follow it, or him or them cause its a a cylinder and a sphere now - Ajays IARVR Site</title>

  
  <meta name="theme-color" />

  <meta name="description" content="This week I finally started working on the LocomotionTechnique script itself instead of just moving GameObjects around like Lego. It was fun to test things out on the already existing repo, Must have taken a lot of hours to make this entir thing. Just thinking about it made me motion sick :scream:
In the original project the camera rig was the player. In my version the real body is AvatarRoot  a capsule collider rolling through the world with a cylinder (avatar) and a sphere (airball) as place holder. I thought I will put in design later, incase everythign gets done by February." />
  <meta name="author" content="Ajays IARVR Site" /><link rel="preload stylesheet" as="style" href="https://vaderjunior.github.io/HCI_IARVR_Blog/main.min.8a93c1f856881bc70f08a469e6dc92385ecc7b3d4f16bb06647ca0c06cf9ced2.css" integrity="sha256-ipPB&#43;FaIG8cPCKRp5tySOF7Mez1PFrsGZHygwGz5ztI=" />

  
  <link rel="preload" as="image" href="https://vaderjunior.github.io/HCI_IARVR_Blog/theme.png" />

  

  

  <script
    defer
    src="https://vaderjunior.github.io/HCI_IARVR_Blog/highlight.min.js"
    onload="hljs.initHighlightingOnLoad()"
  ></script>

  
  <link
    rel="icon"
    href="https://vaderjunior.github.io/HCI_IARVR_Blog/favicon.ico"
  />
  <link
    rel="apple-touch-icon"
    href="https://vaderjunior.github.io/HCI_IARVR_Blog/apple-touch-icon.png"
  />

  <meta name="generator" content="Hugo 0.152.2">
  <meta itemprop="name" content="Week 6 and 7: Teaching the Avatar to Follow Me or me to follow it, or him or them cause its a a cylinder and a sphere now">
  <meta itemprop="description" content="This week I finally started working on the LocomotionTechnique script itself instead of just moving GameObjects around like Lego. It was fun to test things out on the already existing repo, Must have taken a lot of hours to make this entir thing. Just thinking about it made me motion sick :scream:
In the original project the camera rig was the player. In my version the real body is AvatarRoot a capsule collider rolling through the world with a cylinder (avatar) and a sphere (airball) as place holder. I thought I will put in design later, incase everythign gets done by February.">
  <meta itemprop="datePublished" content="2025-12-10T09:38:16+01:00">
  <meta itemprop="dateModified" content="2025-12-10T09:38:16+01:00">
  <meta itemprop="wordCount" content="1248"><meta property="og:url" content="https://vaderjunior.github.io/HCI_IARVR_Blog/posts/week-67/">
  <meta property="og:site_name" content="Ajays IARVR Site">
  <meta property="og:title" content="Week 6 and 7: Teaching the Avatar to Follow Me or me to follow it, or him or them cause its a a cylinder and a sphere now">
  <meta property="og:description" content="This week I finally started working on the LocomotionTechnique script itself instead of just moving GameObjects around like Lego. It was fun to test things out on the already existing repo, Must have taken a lot of hours to make this entir thing. Just thinking about it made me motion sick :scream:
In the original project the camera rig was the player. In my version the real body is AvatarRoot a capsule collider rolling through the world with a cylinder (avatar) and a sphere (airball) as place holder. I thought I will put in design later, incase everythign gets done by February.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-12-10T09:38:16+01:00">
    <meta property="article:modified_time" content="2025-12-10T09:38:16+01:00">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Week 6 and 7: Teaching the Avatar to Follow Me or me to follow it, or him or them cause its a a cylinder and a sphere now">
  <meta name="twitter:description" content="This week I finally started working on the LocomotionTechnique script itself instead of just moving GameObjects around like Lego. It was fun to test things out on the already existing repo, Must have taken a lot of hours to make this entir thing. Just thinking about it made me motion sick :scream:
In the original project the camera rig was the player. In my version the real body is AvatarRoot a capsule collider rolling through the world with a cylinder (avatar) and a sphere (airball) as place holder. I thought I will put in design later, incase everythign gets done by February.">

  <link rel="canonical" href="https://vaderjunior.github.io/HCI_IARVR_Blog/posts/week-67/" />
</head>
<body
    class="bg-(--bg) text-black antialiased duration-200 ease-out [-webkit-tap-highlight-color:transparent] dark:text-white"
  ><header
  class="mx-auto flex h-[4.5rem] max-w-(--w) px-8 whitespace-nowrap lg:justify-center"
>
  <div class="relative z-50 flex items-center ltr:mr-auto rtl:ml-auto">
    <a
      class="-translate-y-[1px] text-2xl font-medium"
      href="https://vaderjunior.github.io/HCI_IARVR_Blog/"
      >Ajays IARVR Site</a
    >
    <div
      class="btn-dark text-[0px] ltr:ml-4 rtl:mr-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]"
      role="button"
      aria-label="Dark"
    ></div>
  </div>

  <div
    class="btn-menu relative z-50 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden ltr:-mr-8 rtl:-ml-8"
    role="button"
    aria-label="Menu"
  ></div>

  <script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = '#faf8f1'.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? "rgb(0 0 0 / 85%)" : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    if (htmlClass.contains('dark')) {
      setDark(true);
    } else {
      const darkVal = localStorage.getItem('dark');
      setDark(darkVal ? darkVal === 'true' : darkScheme.matches);
    }

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full flex-col justify-center bg-(--bg) pb-16 duration-200 select-none lg:static lg:h-auto lg:flex-row lg:bg-transparent! lg:pb-0 lg:transition-none"
  >
  </div>
</header>
<main
      class="prose prose-neutral dark:prose-invert relative mx-auto min-h-[calc(100vh-9rem)] max-w-(--w) px-8 pt-14 pb-16"
    ><article>
  <header class="mb-14">
    <h1 class="my-0! pb-2.5">Week 6 and 7: Teaching the Avatar to Follow Me or me to follow it, or him or them cause its a a cylinder and a sphere now</h1><div class="text-xs antialiased opacity-60"><time>Dec 10, 2025</time></div></header>

  <section><p>This week I finally started working on the <code>LocomotionTechnique</code> script itself instead of just moving GameObjects around like Lego. It was fun to test things out on the already existing repo, Must have taken a lot of hours to make this entir thing. Just thinking about it made me motion sick :scream:</p>
<p>In the original project the camera rig was the player. In my version the real body is <code>AvatarRoot</code>  a capsule collider rolling through the world with a cylinder (<code>avatar</code>) and a sphere (<code>airball</code>) as place holder. I thought I will put in design later, incase everythign gets done by February.</p>
<p>I had to put in considerable amount of time and reading up to understand how to configure this change. In practice, AvatarRoot now has the rigidbody + capsule collider and is the thing that really moves and hits the world. The OVRCameraRig just follows it and looks at it instead of being the player itself.</p>
<blockquote>
<p>This part is open to change, since I thought id gameify it a bit. I thought the coin collection is much easier this way. Maybe I am wrong, but I will test things out and see from there</p>
</blockquote>
<p>Also, I moved my third-person follow logic into <code>LocomotionTechnique</code>:</p>
<ul>
<li><code>avatarRoot</code> and <code>avatarBody</code> became public fields on the script.</li>
<li>I added a <code>cameraOffset</code> and <code>followLerp</code>.</li>
<li>In <code>LateUpdate()</code> I started repositioning the <code>OVRCameraRig</code> behind the avatar instead of letting it move on its own.</li>
</ul>
<h3 id="lateupdate-vs-update"><u><strong>LateUpdate vs Update</strong></u></h3>
<p>I wasn’t sure at first where this follow logic should be added, so I went down a small rabbit hole about Unitys update order and discovered <code>LateUpdate()</code>. Unity calls <strong><code>Update()</code> on everything first</strong>, and then <strong><code>LateUpdate()</code> afterwards</strong>. Since my avatar movement happens earlier in the frame, putting the camera follow code in <code>LateUpdate()</code> means the avatar has already finished moving, and then the <code>OVRCameraRig</code> simply snaps in behind it. That way the camera feels more like its reacting to the final position of the avatar each frame.</p>
<blockquote>
<p><strong>Note:</strong><br>
This is also where I first learned the word <em>yaw</em>. Until then everything was just “tilt” in my head. I was reading a Unity forum post where someone casually wrote about “HMD yaw”, and that made more sense so I am using it everywhere now.</p>
</blockquote>
<p>The very first version followed the HMD yaw: every time I turned my head, the whole rig tried to stay behind me. It looked fine when i tested it in my laptops unity game mode. But In VR it felt like my avatar was orbiting me whenever I looked to the side. Not great, and also a bit confusing because I was only trying to Look around, not drag my whole body with me.</p>
<p>After a bit of trial and error I realised the mistake: I was treating the <strong>head direction</strong> as the “true” forward direction for the whole rig. So any tiny head turn made the rig try to reposition itself again. That’s when I decided to change the mental model.</p>
<p>So I changed it to:</p>
<ul>
<li>The avatar is the “real” direction in the world.</li>
<li>The camera rig is fixed behind the avatar. Like a game you can say.</li>
<li>My head is just freely moving inside that rig.</li>
</ul>
<p>Once I started thinking about it this way, the implementation also became clearer.</p>
<p>Technically that meant something like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">// Compute desired camera rig position behind the avatar</span>
</span></span><span style="display:flex;"><span>Vector3 targetPos =
</span></span><span style="display:flex;"><span>    avatarRoot.position
</span></span><span style="display:flex;"><span>    - avatarRoot.forward * Mathf.Abs(cameraOffset.z)
</span></span><span style="display:flex;"><span>    + Vector3.up * cameraOffset.y;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Smoothly move rig position</span>
</span></span><span style="display:flex;"><span>transform.position = Vector3.Lerp(
</span></span><span style="display:flex;"><span>    transform.position,
</span></span><span style="display:flex;"><span>    targetPos,
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">1f</span> - Mathf.Exp(-followLerp * Time.deltaTime)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Smoothly align rig yaw with avatar yaw</span>
</span></span><span style="display:flex;"><span>Quaternion targetYaw = Quaternion.Euler(<span style="color:#ae81ff">0f</span>, avatarRoot.eulerAngles.y, <span style="color:#ae81ff">0f</span>);
</span></span><span style="display:flex;"><span>transform.rotation = Quaternion.Slerp(
</span></span><span style="display:flex;"><span>    transform.rotation,
</span></span><span style="display:flex;"><span>    targetYaw,
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">1f</span> - Mathf.Exp(-followLerp * Time.deltaTime)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>So instead of following the HMD yaw, the rig now follows <code>AvatarRoot.forward</code>. The HMD is free to look around inside the rig without moving the body. Once this clicked, it suddenly felt more like a proper third-person game: the avatar is always in front of me, the world is stable, and my head isn’t secretly driving everything.</p>
<h3 id="before"><u><strong>Before</strong></u></h3>
<video
  controls
  autoplay
  loop
  muted
  playsinline
  width="900"
  style="max-width: 100%; height: auto; border-radius: 10px; margin: 0.5rem 0 1rem 0;"
>
  <source src='../../videos/week_6_yaw.mp4' type="video/mp4">
  Your browser does not support the video tag.
</video>
<h3 id="after"><u><strong>After</strong></u></h3>
<video
  controls
  autoplay
  loop
  muted
  playsinline
  width="900"
  style="max-width: 100%; height: auto; border-radius: 10px; margin: 0.5rem 0 1rem 0;"
>
  <source src='../../videos/week_6_no_yaw.mp4' type="video/mp4">
  Your browser does not support the video tag.
</video>
<p>With the camera behaviour in a decent spot for now, I finally started on the actual “airbender” part: <strong>left-hand tilt movement</strong>.</p>
<h3 id="locomotion"><u><strong>Locomotion</strong></u></h3>
<blockquote>
<p><strong>Left Hand Idea</strong><br>
Hold your left controller straight and flat in front of you like you’re steering an invisible scooter, and tilt to move. I have never driven movement from a rotation like this before, so this part was pretty experimental and was doubtful to even work.</p>
</blockquote>
<video
  controls
  autoplay
  loop
  muted
  playsinline
  width="900"
  style="max-width: 100%; height: auto; border-radius: 10px; margin: 0.5rem 0 1rem 0;"
>
  <source src='../../videos/week_6_left.mp4' type="video/mp4">
  Your browser does not support the video tag.
</video>
<p>I added a calibration for a “neutral” pose:</p>
<ul>
<li><code>CalibrateLeftNeutral()</code> stores the current left-hand rotation as neutral.</li>
<li><strong>X</strong> button triggers recalibration.</li>
<li>For a short <code>neutralLockDuration</code>, movement is frozen. I might change it to pause till the x button is released.</li>
</ul>
<p>The goal here was to let me hold the controller in whatever is comfortable and mostly for test purposes, since during testing i was rotating so much and i was getting dizzy. This helped a lot.</p>
<p>Then each frame I roughly do:</p>
<ul>
<li>Get the left controller rotation.</li>
<li>Ask Unity for the controller’s current “up” vector from that rotation.</li>
<li>Compare it to the neutral up vector in the XZ plane.</li>
<li>Treat that difference as a tilt value and feed it into movement.</li>
</ul>
<p>I don’t fully understand all the maths under the hood yet, but this was enough to get a first prototype where tilting my left controller actually moved the avatar around. I had to get help from online forums and chatgpt for this calculations.</p>
<div style="border-left: 4px solid #ef4444; background: #fee2e2; padding: 0.75rem 1rem; margin: 1rem 0;">
<p><strong>Major roadblock</strong></p>
<p>I wasted around 2–3 days because even when I couldn’t see my left hand, my avatar was still moving. It made no sense to me.<br>
Only by accident I noticed that my hand was still just at the edge of my vision. I was keeping my hands on my lap and the Quest cameras could still see them, even though I couldn’t.</p>
<p>I felt dumb and relieved at the same time.</p>
</div>
<p>To fix it, I added “activation zones” around the head, because my left controller is almost always doing something random until i keep the whole arm behind me.</p>
<ul>
<li>The left controller has to be inside a small 3D box in front of the chest.</li>
<li>Outside that box, tilt is ignored.</li>
</ul>
<p>I also spawned a translucent box in the scene (<code>leftHandZoneVisual</code>) so I could see where this zone actually was. This helped a lot to debug why sometimes nothing was happening: most of the time my controller was  outside the zone.</p>
<h3 id="so-now-below-is-what-i-have"><u><strong>So now below is what I have:</strong></u></h3>
<ul>
<li>A proper third-person camera integrated into the locomotion script.</li>
<li>A calibrated left-hand controller steering concept with activation zone and reset. Needs a ton of work to calibrate tho. Now if i test i need to sit for a few minutes because i get so dizzy from the erratic movement.</li>
</ul>
<p>Below you can see when my hand is in the zone which is very green(i made this so its very easy to understand in the video) the avatar moved, otherwise it wont.</p>
<video
  controls
  autoplay
  loop
  muted
  playsinline
  width="900"
  style="max-width: 100%; height: auto; border-radius: 10px; margin: 0.5rem 0 1rem 0;"
>
  <source src='../../videos/zone.mp4' type="video/mp4">
  Your browser does not support the video tag.
</video>
<p>The movement still felt a bit wobbly. Sometimes a tiny tilt did more than I expected, sometimes less. But at least the basic idea of Aand on an airball that I can steer with my left controller was visible now. The plan for the next round is to make this feel more consistent and predictable. Also right hand controllers.</p>
<p>Cheers,</p>
<p>-Ajay</p>
</section>

  <nav
    class="mt-24 flex overflow-hidden rounded-xl bg-black/[3%] text-lg leading-[1.2]! *:flex *:w-1/2 *:items-center *:p-5 *:font-medium *:no-underline dark:bg-white/[8%] [&>*:hover]:bg-black/[2%] dark:[&>*:hover]:bg-white/[3%]"
  ><a class="ltr:pr-3 rtl:pl-3" href="https://vaderjunior.github.io/HCI_IARVR_Blog/posts/winter-break-weeks/"
      ><span class="ltr:mr-1.5 rtl:ml-1.5">←</span><span>Winter Break and New year week: When Physics Starts Messing With My Hands</span></a
    ><a
      class="justify-end pl-3 ltr:ml-auto rtl:mr-auto"
      href="https://vaderjunior.github.io/HCI_IARVR_Blog/posts/week-5/"
      ><span>Week 5: Getting started with Airbending or rather Unitybending</span><span class="ltr:ml-1.5 rtl:mr-1.5">→</span></a
    ></nav></article></main><footer
  class="mx-auto flex h-[4.5rem] max-w-(--w) items-center px-8 text-xs tracking-wider uppercase opacity-60"
>
  <div class="mr-auto">&copy;2026
    <a class="link" href="https://vaderjunior.github.io/HCI_IARVR_Blog/">Ajays IARVR Site</a></div>
  <a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank"
    >powered by hugo️️</a
  >️
  <a
    class="link"
    href="https://github.com/nanxiaobei/hugo-paper"
    rel="noopener"
    target="_blank"
    >hugo-paper</a
  >
</footer>
</body>
</html>
